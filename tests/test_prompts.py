from typing import Dict


def get_slide_prompt(slide_type: str, context: str, audience: str) -> str:
    """Возвращает русскоязычные промпты для rugpt3 модели"""

    base_prompts = {
        "title": {
            "prompt": """Сгенерируй убедительный заголовок для инвестиционной презентации проекта.

Контекст проекта: {context}
Целевая аудитория: {audience}

Требования:
- Максимально 5-7 слов
- Ярко и запоминающеся
- Отражает суть проекта
- Подходит для {audience}

Заголовок:""",
            "description": "Генерация заголовка презентации"
        },

        "problem": {
            "prompt": """Опиши проблему, которую решает проект, для инвестиционной презентации.

Контекст проекта: {context}
Целевая аудитория: {audience}

Требования:
- 2-3 предложения
- Конкретные цифры и факты если есть в контексте
- Покажи масштаб проблемы
- Объясни почему эта проблема важна

Описание проблемы:""",
            "description": "Описание проблемы проекта"
        },

        "solution": {
            "prompt": """Опиши решение, которое предлагает проект, для инвестиционной презентации.

Контекст проекта: {context}
Целевая аудитория: {audience}

Требования:
- 2-3 ключевых преимущества
- Чем решение лучше существующих альтернатив
- Технологическая уникальность если есть
- Простое и понятное объяснение

Описание решения:""",
            "description": "Описание решения проекта"
        },

        "market": {
            "prompt": """Проанализируй рыночный контекст для инвестиционной презентации.

Контекст проекта: {context}
Целевая аудитория: {audience}

Требования:
- Размер рынка (если есть в данных)
- Тренды и драйверы роста
- Целевая аудитория проекта
- Конкурентная среда

Анализ рынка:""",
            "description": "Анализ рынка и возможностей"
        },

        "team": {
            "prompt": """Опиши команду проекта для инвестиционной презентации.

Контекст проекта: {context}
Целевая аудитория: {audience}

Требования:
- Ключевые участники команды
- Их экспертиза и опыт
- Почему эта команда подходит для проекта
- Уникальные компетенции

Описание команды:""",
            "description": "Описание команды проекта"
        },

        "finance": {
            "prompt": """Представь финансовые показатели проекта для инвестиционной презентации.

Контекст проекта: {context}
Целевая аудитория: {audience}

Требования:
- Ключевые финансовые метрики
- Прогноз выручки если есть
- Период окупаемости
- Основные статьи расходов

Финансовые показатели:""",
            "description": "Финансовые показатели проекта"
        },

        "summary": {
            "prompt": """Сделай краткое резюме проекта для заключительного слайда инвестиционной презентации.

Контекст проекта: {context}
Целевая аудитория: {audience}

Требования:
- 3-4 ключевых пункта
- Основные выводы
- Призыв к действию
- Кратко и убедительно

Резюме проекта:""",
            "description": "Краткое резюме проекта"
        }
    }

    if slide_type not in base_prompts:
        return f"""Сгенерируй контент для слайда '{slide_type}' инвестиционной презентации.

Контекст проекта: {context}
Целевая аудитория: {audience}

Контент для слайда:"""

    prompt_template = base_prompts[slide_type]["prompt"]
    return prompt_template.format(context=context, audience=audience)


def get_audience_specific_instructions(audience: str) -> str:
    """Возвращает инструкции в зависимости от целевой аудитории"""
    instructions = {
        "инвесторы": "Акцент на возврат инвестиций, масштабируемость, рынок, финансовые показатели",
        "топ-менеджмент": "Акцент на стратегическое соответствие, операционную эффективность, KPI",
        "эксперты": "Акцент на технологические детали, методологию, инновации, метрики"
    }
    return instructions.get(audience, "Профессиональный и убедительный стиль")